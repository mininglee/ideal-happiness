UPDATE myanimal
SET animal_type = CASE
    WHEN birth_year > :current_year - 1 THEN '어린 강아지'
    WHEN birth_year > :current_year - 1.5 THEN '성장 중인 강아지'
    ELSE '성체 강아지'
END;


CREATE TABLE health_information12 (
    member_id INT,
    exercise_amount INT,
    disease VARCHAR(255),
    height_range INT,
    weight_range VARCHAR(255)
);

INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('골든 리트리버', '어린 강아지', '일일 약 30분에서 1시간 정도의 산책과 약간의 놀이 시간을 권장합니다.', '식욕 부진, 눈꺼풀 이완증', '평균 신장 45cm', '적정 몸무게 15-25kg');

INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('골든 리트리버', '성장 중 강아지', '일일 약 1시간에서 2시간 정도의 산책과 활동적인 놀이 시간을 권장합니다.', '소화 문제, 피부 염증', '평균 신장 60cm', '적정 몸무게 25-35kg');

INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('골든 리트리버', '성년 강아지', '일일 약 2시간 이상의 산책과 활동이 풍부한 놀이 시간을 권장합니다.', '암, 고관절 질환', '평균 신장 61cm', '적정 몸무게 25-34kg');
  
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('진돗개', '어린 강아지', '일일 약 30분에서 1시간 정도의 산책과 약간의 놀이 시간을 권장합니다.', '열사병, 관절 이상, 피부 문제', '평균 신장 38-42cm', '적정 몸무게 8-12kg');

INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('진돗개', '성장 중 강아지', '일일 약 1시간에서 2시간 정도의 산책과 활동적인 놀이 시간을 권장합니다.', '열사병, 관절 이상, 피부 문제', '평균 신장 50-55cm', '적정 몸무게 15-20kg');

INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('진돗개', '성년 강아지', '일일 약 2시간 이상의 산책과 활동이 풍부한 놀이 시간을 권장합니다.', '열사병, 관절 이상, 피부 문제', '평균 신장 55-60cm', '적정 몸무게 18-25kg');

-- Poodle (푸들)
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('푸들', '어린 강아지', '일일 약 30분에서 1시간 정도의 산책과 약간의 놀이 시간을 권장합니다.', '식욕 부진, 구토와 설사', '평균 신장 22-33cm', '적정 몸무게 3-8kg');

INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('푸들', '성장 중 강아지', '일일 약 1시간에서 2시간 정도의 산책과 활동적인 놀이 시간을 권장합니다.', '피부 감염, 알레르기', '평균 신장 28-40cm', '적정 몸무게 7-15kg');

INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('푸들', '성년 강아지', '일일 약 2시간 이상의 산책과 활동이 풍부한 놀이 시간을 권장합니다.', '눈 및 귀 질환, 신장 질환', '평균 신장 28-38cm', '적정 몸무게 17-25kg');

-- Chihuahua (치와와)
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('치와와', '어린 강아지', '일일 약 30분에서 1시간 정도의 산책과 약간의 놀이 시간을 권장합니다.', '호흡곤란, 장염', '평균 신장 12-18cm', '적정 몸무게 0.5-2kg');

INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('치와와', '성장 중 강아지', '일일 약 1시간에서 2시간 정도의 산책과 활동적인 놀이 시간을 권장합니다.', '피부 알레르기, 위장관 질환', '평균 신장 15-20cm', '적정 몸무게 1-2.5kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('치와와', '성년 강아지', '일일 약 2시간 이상의 산책과 활동이 풍부한 놀이 시간을 권장합니다.', '심장 질환, 관절 이상', '평균 신장 15-23cm', '적정 몸무게 13kg');

-- Maltese (말티즈)
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('말티즈', '어린 강아지', '일일 약 30분에서 1시간 정도의 산책과 약간의 놀이 시간을 권장합니다.', '식욕 부진, 구토와 설사', '평균 신장 18-22cm', '적정 몸무게 1.5-2.5kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('말티즈', '성장 중 강아지', '일일 약 1시간에서 2시간 정도의 산책과 활동적인 놀이 시간을 권장합니다.', '피부 문제, 턱 관절 이상', '평균 신장 22-25cm', '적정 몸무게 2-4kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('말티즈', '성년 강아지', '일일 약 2시간 이상의 산책과 활동이 풍부한 놀이 시간을 권장합니다.', '치아 문제, 심장 질환', '평균 신장 22-25cm', '적정 몸무게 3-4kg');

-- Bulldog (불독)
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('불독', '어린 강아지', '일일 약 30분에서 1시간 정도의 산책과 약간의 놀이 시간을 권장합니다.', '호흡곤란, 장염', '평균 신장 25-35cm', '적정 몸무게 7-15kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('불독', '성장 중 강아지', '일일 약 1시간에서 2시간 정도의 산책과 활동적인 놀이 시간을 권장합니다.', '피부 알레르기, 위장관 질환', '평균 신장 30-40cm', '적정 몸무게 13-22kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('불독', '성년 강아지', '일일 약 2시간 이상의 산책과 활동이 풍부한 놀이 시간을 권장합니다.', '심장 질환, 관절 이상', '평균 신장 30-40cm', '적정 몸무게 18-25kg');

-- German Shepherd (저먼 셰퍼드)
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('저먼셰퍼드', '어린 강아지', '일일 약 30분에서 1시간 정도의 산책과 약간의 놀이 시간을 권장합니다.', '식욕 부진, 구토와 설사', '평균 신장 55-66cm', '적정 몸무게 22-40kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('저먼 셰퍼드', '성장 중 강아지', '일일 약 1시간에서 2시간 정도의 산책과 활동적인 놀이 시간을 권장합니다.', '허리디스크, 고관절 이상', '평균 신장 61-66cm', '적정 몸무게 30-40kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('저먼 셰퍼드', '성년 강아지', '일일 약 2시간 이상의 산책과 활동이 풍부한 놀이 시간을 권장합니다.', '염증성 장질환, 암', '평균 신장 60-65cm', '적정 몸무게 30-40kg');

-- Labrador Retriever (라브라도 리트리버)
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('라브라도 리트리버', '어린 강아지', '일일 약 30분에서 1시간 정도의 산책과 약간의 놀이 시간을 권장합니다.', '비만, 고관절 이상', '평균 신장 54-58cm', '적정 몸무게 25-36kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('라브라도 리트리버', '성장 중 강아지', '일일 약 1시간에서 2시간 정도의 산책과 활동적인 놀이 시간을 권장합니다.', '피부 알레르기, 고관절 이상', '평균 신장 56-61cm', '적정 몸무게 27-36kg');
INSERT INTO health_information (breed_name, age_range, exercise_amount, diseases, height_range, weight_range)
VALUES
    ('라브라도 리트리버', '성년 강아지', '일일 약 2시간 이상의 산책과 활동이 풍부한 놀이 시간을 권장합니다.', '비만, 관절 이상', '평균 신장 56-61cm', '적정 몸무게 27-36kg');




<%@ page import="java.sql.*" %>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>애완동물 건강 분석</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="main.css">

    <script>
        function changeWord(element, words) {
            element.innerHTML = element.innerHTML === words[0] ? words[1] : words[0];
        }

        function analyzeHealth() {
            const breed = document.getElementById('breed').value;
            const age = document.getElementById('age').value;
            const height = document.getElementById('height').value;
            const weight = document.getElementById('weight').value;
            const diet = document.getElementById('diet').value;
            const exercise = document.getElementById('exercise').value;

            // 건강 분석 로직을 수행하고 결과를 표시합니다.
            const result = `애완동물 건강 분석 결과:<br>
                            종: ${breed}<br>
                            나이: ${age}<br>
                            키: ${height}<br>
                            체중: ${weight}<br>
                            식습관: ${diet}<br>
                            운동량: ${exercise}`;

            document.getElementById('result').innerHTML = result;

            // 애완동물 정보를 DB에 저장
            const email = '<%= session.getAttribute("email") %>';
            const groupid = document.getElementById('breed').value;
            const neuter = document.getElementById('diet').value === '중성화됨' ? 'O' : 'X';
            const name = document.getElementById('name').value;
            const ageValue = parseInt(age);
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const picture = document.getElementById('picture').value;

            const xhttp = new XMLHttpRequest();
            const url = '${pageContext.request.contextPath}/saveAnimalInfo';
            const params = `email=${email}&groupid=${groupid}&neuter=${neuter}&name=${name}&age=${ageValue}&gender=${gender}&picture=${picture}`;

            xhttp.open("POST", url, true);
            xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhttp.send(params);
        }
    </script>
</head>
<body>
   
    <%
        // 세션에서 강아지 종류와 나이 가져오기
        String breed = (String)session.getAttribute("breed");
        String age = (String)session.getAttribute("age");
    %>

    <div class="analysis-container">
        <div class="analysis-card">
            <label for="breed" class="input-label">종</label>
            <input type="text" id="breed" class="input-field" value="<%= breed %>" readonly>

            <label for="age" class="input-label">나이</label>
            <input type="number" id="age" class="input-field" value="<%= age %>" readonly>

            <label for="height" class="input-label">키</label>
            <input type="number" id="height" class="input-field">

            <label for="weight" class="input-label">체중</label>
            <input type="number" id="weight" class="input-field">

            <label for="diet" class="input-label">식습관</label>
            <select id="diet" class="input-field">
                <option value="중성화됨">중성화됨</option>
                <option value="중성화되지 않음">중성화되지 않음</option>
            </select>

            <label for="exercise" class="input-label">운동량</label>
            <input type="number" id="exercise" class="input-field">

            <button onclick="analyzeHealth()" class="submit-button">건강 분석</button>

            <div id="result" class="result-container"></div>
        </div>
    </div>

    <%-- 애완동물 정보를 DB에 저장하는 서블릿으로의 요청을 처리하기 위한 서블릿 매핑 --%>
    <form id="saveAnimalForm" action="${pageContext.request.contextPath}/saveAnimalInfo" method="POST" style="display: none;">
        <input type="hidden" name="email" value="<%= session.getAttribute("email") %>">
        <input type="hidden" name="groupid" value="<%= breed %>">
        <input type="hidden" name="neuter" value="">
        <input type="hidden" name="name" value="">
        <input type="hidden" name="age" value="">
        <input type="hidden" name="gender" value="">
        <input type="hidden" name="picture" value="">
    </form>

</body>
</html>
